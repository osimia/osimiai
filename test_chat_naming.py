#!/usr/bin/env python
"""
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è —á–∞—Ç–æ–≤
"""
import os
import sys
import django

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Django
os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'legalai.settings')
sys.path.append(os.path.dirname(os.path.abspath(__file__)))
django.setup()

from chat.utils import generate_chat_title

def test_chat_naming():
    """–¢–µ—Å—Ç–∏—Ä—É–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è —á–∞—Ç–æ–≤"""
    
    test_cases = [
        # –¢—Ä—É–¥–æ–≤–æ–µ –ø—Ä–∞–≤–æ
        ("–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Ç—Ä—É–¥–æ–≤–æ–º –∫–æ–¥–µ–∫—Å–µ –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω–∞", "–¢—Ä—É–¥–æ–≤–æ–µ –ø—Ä–∞–≤–æ"),
        ("–ö–∞–∫–∏–µ –ø—Ä–∞–≤–∞ —É —Ä–∞–±–æ—Ç–Ω–∏–∫–∞ –ø—Ä–∏ —É–≤–æ–ª—å–Ω–µ–Ω–∏–∏?", "–¢—Ä—É–¥–æ–≤–æ–µ –ø—Ä–∞–≤–æ"),
        ("–°–∫–æ–ª—å–∫–æ –¥–Ω–µ–π –æ—Ç–ø—É—Å–∫–∞ –ø–æ–ª–æ–∂–µ–Ω–æ —Ä–∞–±–æ—Ç–Ω–∏–∫—É?", "–¢—Ä—É–¥–æ–≤–æ–µ –ø—Ä–∞–≤–æ"),
        
        # –°–µ–º–µ–π–Ω–æ–µ –ø—Ä–∞–≤–æ
        ("–ö–∞–∫ –æ—Ñ–æ—Ä–º–∏—Ç—å —Ä–∞–∑–≤–æ–¥ –≤ –¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω–µ?", "–°–µ–º–µ–π–Ω–æ–µ –ø—Ä–∞–≤–æ"),
        ("–†–∞–∑–º–µ—Ä –∞–ª–∏–º–µ–Ω—Ç–æ–≤ –Ω–∞ —Ä–µ–±–µ–Ω–∫–∞", "–°–µ–º–µ–π–Ω–æ–µ –ø—Ä–∞–≤–æ"),
        ("–£—Å–ª–æ–≤–∏—è –∑–∞–∫–ª—é—á–µ–Ω–∏—è –±—Ä–∞–∫–∞", "–°–µ–º–µ–π–Ω–æ–µ –ø—Ä–∞–≤–æ"),
        
        # –ì—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–µ –ø—Ä–∞–≤–æ
        ("–ö–∞–∫ –ø–æ–¥–∞—Ç—å –∏—Å–∫ –≤ —Å—É–¥?", "–ì—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–µ –ø—Ä–∞–≤–æ"),
        ("–ó–∞—â–∏—Ç–∞ –ø—Ä–∞–≤ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–µ–π", "–ì—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–µ –ø—Ä–∞–≤–æ"),
        
        # –ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å
        ("–ü–æ–∫—É–ø–∫–∞ –∫–≤–∞—Ä—Ç–∏—Ä—ã –≤ –∏–ø–æ—Ç–µ–∫—É", "–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å"),
        ("–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∞–≤–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–∞ –¥–æ–º", "–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å"),
        
        # –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—Ç–∞—Ç—å–∏
        ("–ß—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç —Å—Ç–∞—Ç—å—è 15 —Ç—Ä—É–¥–æ–≤–æ–≥–æ –∫–æ–¥–µ–∫—Å–∞?", "–°—Ç–∞—Ç—å—è 15"),
        ("–û–±—ä—è—Å–Ω–∏—Ç–µ —Å—Ç–∞—Ç—å—é 100 –≥—Ä–∞–∂–¥–∞–Ω—Å–∫–æ–≥–æ –∫–æ–¥–µ–∫—Å–∞", "–°—Ç–∞—Ç—å—è 100"),
        
        # –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã
        ("–ü–æ–º–æ–≥–∏—Ç–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º –∏–º—É—â–µ—Å—Ç–≤–∞", "–ü–æ–º–æ–≥–∏—Ç–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º"),
        ("–ö–∞–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω—É–∂–Ω—ã –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ò–ü?", "–ö–∞–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω—É–∂–Ω—ã –¥–ª—è"),
        
        # –î–ª–∏–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
        ("–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –£ –º–µ–Ω—è –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è —Å —Ä–∞–±–æ—Ç–æ–¥–∞—Ç–µ–ª–µ–º, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –≤—ã–ø–ª–∞—á–∏–≤–∞–µ—Ç –∑–∞—Ä–ø–ª–∞—Ç—É —É–∂–µ —Ç—Ä–µ—Ç–∏–π –º–µ—Å—è—Ü", "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –£ –º–µ–Ω—è –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è..."),
        
        # –ü—É—Å—Ç—ã–µ –∏ –∫–æ—Ä–æ—Ç–∫–∏–µ
        ("", "–ù–æ–≤—ã–π –¥–∏–∞–ª–æ–≥"),
        ("–ü—Ä–∏–≤–µ—Ç", "–ü—Ä–∏–≤–µ—Ç"),
        ("–ß—Ç–æ?", "–ù–æ–≤—ã–π –¥–∏–∞–ª–æ–≥"),
    ]
    
    print("üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è —á–∞—Ç–æ–≤\n")
    
    for i, (question, expected_contains) in enumerate(test_cases, 1):
        result = generate_chat_title(question)
        
        print(f"–¢–µ—Å—Ç {i}:")
        print(f"  –í–æ–ø—Ä–æ—Å: '{question}'")
        print(f"  –†–µ–∑—É–ª—å—Ç–∞—Ç: '{result}'")
        print(f"  –û–∂–∏–¥–∞–µ—Ç—Å—è —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ: '{expected_contains}'")
        
        if expected_contains.lower() in result.lower():
            print("  ‚úÖ –ü–†–û–®–ï–õ")
        else:
            print("  ‚ùå –ù–ï –ü–†–û–®–ï–õ")
        print()

if __name__ == "__main__":
    test_chat_naming()
